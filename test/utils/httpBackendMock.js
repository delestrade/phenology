'use strict';

var httpBackendMock = function() {

  angular.module('httpBackendMock', ['ngMockE2E', 'phenology'])
    .run(function($httpBackend, authApiClient) {
      console.log("Bootstrapped");

      var user_settings = {"user": {"username": "admin", "email": "admin@admin.fr", "groups": []}, "areas": [{"species": [{"individuals": [{"stages": [], "id": 1, "name": "Noisetier A 1", "lat": 44.843788, "lon": 6.256015, "remark": ""}, {"stages": [], "id": 2, "name": "Noisetier A 2", "lat": 44.843818, "lon": 6.254878, "remark": ""}, {"stages": [], "id": 3, "name": "Noisetier A 3", "lat": 44.843506, "lon": 6.254819, "remark": ""}], "id": 1}, {"individuals": [{"stages": [], "id": 4, "name": "Meleze B 1", "lat": 1.0, "lon": -1.0, "remark": ""}, {"stages": [], "id": 5, "name": "Meleze B 2", "lat": 1.0, "lon": -1.0, "remark": ""}, {"stages": [], "id": 6, "name": "Meleze B 3", "lat": 1.0, "lon": -1.0, "remark": ""}], "id": 2}, {"individuals": [{"stages": [], "id": 7, "name": "Tussilage C 1", "lat": 1.0, "lon": -1.0, "remark": ""}, {"stages": [], "id": 8, "name": "Tussilage C 2", "lat": 1.0, "lon": -1.0, "remark": ""}, {"stages": [], "id": 9, "name": "Tussilage C 3", "lat": 1.0, "lon": -1.0, "remark": ""}], "id": 3}], "geojson": {"type": "FeatureCollection", "features": [{"geometry": {"type": "Polygon", "coordinates": [[[6.255115270614623, 44.84452790096239], [6.256048679351807, 44.84442901000019], [6.25645637512207, 44.84393455264287], [6.256166696548462, 44.84334880535878], [6.254600286483764, 44.84342487677113], [6.254514455795288, 44.844193192405285], [6.255115270614623, 44.84452790096239]]]}, "type": "Feature", "properties": {}}]}, "id": 1, "name": "Deep forest", "codezone": "", "polygone": "{\"type\": \"FeatureCollection\", \"features\": [{\"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[6.255115270614623, 44.84452790096239], [6.256048679351807, 44.84442901000019], [6.25645637512207, 44.84393455264287], [6.256166696548462, 44.84334880535878], [6.254600286483764, 44.84342487677113], [6.254514455795288, 44.844193192405285], [6.255115270614623, 44.84452790096239]]]}, \"type\": \"Feature\", \"properties\": {}}]}", "lat": 44.843792, "lon": 6.255593, "remark": "", "commune": ""}, {"species": [{"individuals": [{"stages": [], "id": 10, "name": "Tree A 1", "lat": 44.9264349129738, "lon": 6.637372970581054, "remark": ""}, {"stages": [], "id": 11, "name": "Tree A 2", "lat": 44.92479411744738, "lon": 6.638617515563965, "remark": ""}, {"stages": [], "id": 12, "name": "Tree A 3", "lat": 44.92303172930961, "lon": 6.637394428253174, "remark": ""}], "id": 1}, {"individuals": [{"stages": [], "id": 13, "name": "Tree B 1", "lat": 44.92743759827963, "lon": 6.639432907104492, "remark": ""}, {"stages": [], "id": 14, "name": "Tree B 2", "lat": 44.92622221990126, "lon": 6.639432907104492, "remark": ""}, {"stages": [], "id": 15, "name": "Tree B 3", "lat": 44.92673875885417, "lon": 6.638617515563965, "remark": ""}], "id": 2}], "geojson": {"type": "FeatureCollection", "features": [{"geometry": {"type": "Polygon", "coordinates": [[[6.63325309753418, 44.925614521068866], [6.635527610778809, 44.92117812483123], [6.644110679626465, 44.92199858009217], [6.645998954772949, 44.925827216391475], [6.64170742034912, 44.92889601838952], [6.634325981140137, 44.92886563501494], [6.63325309753418, 44.925614521068866]]]}, "type": "Feature", "properties": {}}]}, "id": 2, "name": "Area 2", "codezone": "", "polygone": "{\"type\": \"FeatureCollection\", \"features\": [{\"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[6.63325309753418, 44.925614521068866], [6.635527610778809, 44.92117812483123], [6.644110679626465, 44.92199858009217], [6.645998954772949, 44.925827216391475], [6.64170742034912, 44.92889601838952], [6.634325981140137, 44.92886563501494], [6.63325309753418, 44.925614521068866]]]}, \"type\": \"Feature\", \"properties\": {}}]}", "lat": 44.92528028397075, "lon": 6.639003753662109, "remark": "", "commune": ""}], "species": [{"id": 1, "name": "Noisetier", "description": "", "picture": "picture/species/noisetier.png", "stages": [{"id": 1, "name": "Flowering", "species": 1, "date_start": "2014-01-15", "month_start": 1, "day_start": 15, "date_end": "2014-03-31", "month_end": 3, "day_end": 3, "order": 1, "picture_before": "picture/stages/noisetier_s1_1.png", "picture_current": "picture/stages/noisetier_s1_2.png", "picture_after": "picture/stages/noisetier_s1_3.png"}, {"id": 2, "name": "Blooming", "species": 1, "date_start": "2014-02-15", "month_start": 2, "day_start": 15, "date_end": "2014-04-30", "month_end": 4, "day_end": 4, "order": 2, "picture_before": "picture/stages/noisetier_s2_1.png", "picture_current": "picture/stages/noisetier_s2_2.png", "picture_after": "picture/stages/noisetier_s2_3.png"}, {"id": 3, "name": "Leafing", "species": 1, "date_start": "2014-03-15", "month_start": 3, "day_start": 15, "date_end": "2014-05-31", "month_end": 5, "day_end": 5, "order": 3, "picture_before": "picture/stages/noisetier_s3_1.png", "picture_current": "picture/stages/noisetier_s3_2.png", "picture_after": "picture/stages/noisetier_s3_3.png"}]}, {"id": 2, "name": "Meleze", "description": "", "picture": "picture/species/meleze.png", "stages": [{"id": 4, "name": "Fall", "species": 2, "date_start": null, "month_start": null, "day_start": null, "date_end": null, "month_end": null, "day_end": null, "order": 2, "picture_before": "no-img.jpg", "picture_current": "no-img.jpg", "picture_after": "no-img.jpg"}, {"id": 5, "name": "End", "species": 2, "date_start": null, "month_start": null, "day_start": null, "date_end": null, "month_end": null, "day_end": null, "order": 3, "picture_before": "no-img.jpg", "picture_current": "no-img.jpg", "picture_after": "no-img.jpg"}]}, {"id": 3, "name": "Tussilage", "description": "", "picture": "picture/species/tussilage.png", "stages": [{"id": 6, "name": "Flowering Tussilage", "species": 3, "date_start": "2014-02-10", "month_start": 3, "day_start": 15, "date_end": "2014-05-31", "month_end": 5, "day_end": 5, "order": 3, "picture_before": "picture/stages/tussilage_s1_1.png", "picture_current": "picture/stages/tussilage_s1_2.png", "picture_after": "picture/stages/tussilage_s1_3.png"}]}], "id": 1, "city": "", "fonction": "", "adresse": "", "codepostal": "", "nationality": "", "phone": "", "is_crea": true};
      var surveys = [];
      $httpBackend.whenGET(new RegExp("/api/")).respond(function (method, url, data, header) {
          if(authApiClient.getUsername() === "admin")
            return [200];
          return [401];
      });
      $httpBackend.whenGET(new RegExp("/user_settings/")).respond(function (method, url, data, header) {
          if(authApiClient.getUsername() === "admin")
            return [200, user_settings, {}];
          return [401];
      });
      $httpBackend.whenGET(new RegExp("/user_surveys/")).respond(function (method, url, data, header) {
          if(authApiClient.getUsername() === "admin")
            return [200, surveys, {}];
          return [401];
      });
      $httpBackend.whenGET(/.*/).passThrough();

    });
};

module.exports.httpBackendMock = httpBackendMock;